# K-006 useAdminCRUD 제네릭 훅 생성 및 Admin 페이지 적용

## 개요
Admin 페이지의 반복적인 CRUD 보일러플레이트 코드를 제네릭 훅으로 추출하고, 8개 Admin 페이지에 적용하여 DRY 원칙을 적용했습니다.

## 주요 변경사항

### 새로 생성된 파일
- `src/lib/hooks/useAdminCRUD.ts` (254줄)

### 리팩터링된 파일 (Phase 1)
| 페이지 | Before | After | 감소율 |
|--------|--------|-------|--------|
| seasons/page.tsx | 295줄 | 233줄 | -21% |
| notices/page.tsx | 262줄 | 192줄 | -27% |
| schedules/page.tsx | 372줄 | 307줄 | -17% |
| members/page.tsx | 265줄 | 222줄 | -16% |
| **소계** | **1,194줄** | **954줄** | **-20%** |

### 리팩터링된 파일 (Phase 2)
| 페이지 | Before | After | 감소율 |
|--------|--------|-------|--------|
| organization/page.tsx | 326줄 | 276줄 | -15% |
| media/page.tsx | 365줄 | 311줄 | -15% |
| signatures/page.tsx | 385줄 | 370줄 | -4% |
| vip-rewards/page.tsx | 365줄 | 309줄 | -15% |
| **소계** | **1,441줄** | **1,266줄** | **-12%** |

### 미적용 페이지 (의도적 제외)
| 페이지 | 이유 |
|--------|------|
| posts/page.tsx | 읽기 전용, 모달 없음 |
| banners/page.tsx | 이미지 미리보기 복잡한 로직 |

### 전체 결과
| 구분 | Before | After | 감소 |
|------|--------|-------|------|
| 8개 페이지 합계 | 2,635줄 | 2,220줄 | **-415줄 (-16%)** |

## useAdminCRUD 훅 기능

```typescript
const {
  items,           // 아이템 목록
  isLoading,       // 로딩 상태
  isModalOpen,     // 모달 상태
  isNew,           // 신규/수정 구분
  editingItem,     // 편집 중인 아이템
  setEditingItem,  // 아이템 업데이트
  openAddModal,    // 추가 모달 열기
  openEditModal,   // 수정 모달 열기
  closeModal,      // 모달 닫기
  handleSave,      // 저장 (추가/수정)
  handleDelete,    // 삭제
  refetch,         // 데이터 새로고침
} = useAdminCRUD<T>({
  tableName: 'seasons',
  defaultItem: { name: '', ... },
  orderBy: { column: 'start_date', ascending: false },
  fromDbFormat: (row) => ({ ... }),  // snake_case → camelCase
  toDbFormat: (item) => ({ ... }),   // camelCase → snake_case
  validate: (item) => { ... },        // 유효성 검사
  beforeSave: async (item) => { ... }, // 저장 전 훅
  deleteConfirmMessage: '...',
})
```

## 적용된 원칙

| 원칙 | 적용 |
|------|------|
| **DRY** | CRUD 로직 중앙화 |
| **SRP** | 훅이 CRUD 책임만 담당 |
| **OCP** | 새 페이지 추가 시 설정만 변경 |

## 결과
- ✅ 빌드 성공
- ✅ 재사용 가능한 제네릭 훅 생성
- ✅ 8개 Admin 페이지 적용 완료
- ✅ 총 415줄 코드 감소 (-16%)
- ✅ CRUD 보일러플레이트 중앙화 (유지보수성 향상)

## 다음 단계
- [x] 나머지 Admin 페이지에 useAdminCRUD 적용 (organization, media, signatures, vip-rewards)
- [ ] K-007: Repository 패턴 전역 적용
- [ ] Admin Modal 컴포넌트 추출 (추가 코드 감소 가능)
